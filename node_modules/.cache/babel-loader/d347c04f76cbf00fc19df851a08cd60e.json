{"ast":null,"code":"var _jsxFileName = \"/home/hamid/Desktop/CA8-Front/src/Movie/Movie.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React from 'react';\nimport './Movie.css';\nimport { useState, useEffect } from \"react\";\nimport { getMovie, postRate } from \"../Services/Movie\";\nimport { useParams } from 'react-router-dom';\nimport { updateWatchList } from \"../Services/Watchlist\";\nimport LoadingSpinner from \"../common/LoadingSpinner\";\nimport { toast } from \"react-toastify\";\nimport ActorsBox from \"./ActorsBox\";\nimport CommentsBox from \"./CommentsBox\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Movie(props) {\n  _s();\n\n  const {\n    movieId\n  } = useParams();\n  const [movie, setMovie] = useState(null);\n  const [comments, setComments] = useState({});\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    setLoading(true);\n    getMovie(movieId).then(m => {\n      setMovie(m);\n      setComments(m.comments);\n      setLoading(false);\n    }).catch(error => {\n      if (error.response) console.log(error.response.data);else console.log(error);\n    });\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"movie-spinner\",\n    children: [\" \", /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 48\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 16\n  }, this);\n  const commentsArr = [];\n  let i = 0;\n\n  for (let key in comments) {\n    commentsArr[i] = comments[key];\n    i++;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(MovieDetails, {\n      movie: movie,\n      setMovie: setMovie\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ActorsBox, {\n      movieId: movieId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CommentsBox, {\n      comments: commentsArr,\n      setComments: setComments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Movie, \"VEUNRWWEnfGhZ1ol3Etr8R92PvA=\", false, function () {\n  return [useParams];\n});\n\n_c = Movie;\n\nfunction MovieDetails(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"movie-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"back-image\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: props.movie.coverImage,\n        alt: props.movie.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 41\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"movie-detail\",\n      children: [/*#__PURE__*/_jsxDEV(Score, {\n        movie: props.movie,\n        setMovie: props.setMovie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MovieInfo, {\n        movie: props.movie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AddToWatchList, {\n        movie: props.movie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n\n_c2 = MovieDetails;\n\nfunction Score(props) {\n  _s2();\n\n  const [show, setShow] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  const handleClick = () => {\n    setShow(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-score\",\n    children: /*#__PURE__*/_jsxDEV(\"dl\", {\n      className: \"desc\",\n      children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n        className: \"desc-text\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: props.movie.imdbRate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), show ? /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: handleClick,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"iconify custom-icon-star\",\n          \"data-icon\": \"emojione:star\",\n          o: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(Stars, {\n        setShow: setShow,\n        setMovie: props.setMovie,\n        movieId: props.movie.id,\n        setLoading: setLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 28\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"desc-text-top\",\n        children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n          className: \"desc-text\",\n          children: [\" \\u0627\\u0645\\u062A\\u06CC\\u0627\\u0632 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u0627\\u0646 \", props.movie.rating]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"dt\", {\n          className: \"desc-text\",\n          children: [\" (\", props.movie.ratingCount, \" \\u0631\\u0627\\u06CC)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(Score, \"fCP5C8lN0GRITmZ+L/6obxAlHlc=\");\n\n_c3 = Score;\n\nfunction Stars(props) {\n  const handleClick = rate => {\n    props.setShow(true);\n    props.setLoading(true);\n    postRate(props.movieId, 10 - rate).then(res => {\n      props.setMovie(res);\n      props.setLoading(false);\n    }).catch(error => {\n      if (error.response) console.log(error.response.data);else console.log(error);\n    });\n  };\n\n  let stars = [];\n\n  for (let i = 0; i < 10; i++) stars.push(Star(i, handleClick));\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rating\",\n    children: stars\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n}\n\n_c4 = Stars;\n\nfunction Star(index, handleClick) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rating\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"radio\",\n      name: \"rating\",\n      value: index,\n      id: index,\n      onClick: () => handleClick(index)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: index,\n      children: \"\\u2606\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 9\n  }, this);\n}\n\n_c5 = Star;\n\nfunction MovieInfo(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-desc\",\n    children: /*#__PURE__*/_jsxDEV(\"dl\", {\n      className: \"desc\",\n      children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n        dir: \"rtl\",\n        children: props.movie.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sub-desc\",\n        children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n          dir: \"rtl\",\n          children: [\" \\u06A9\\u0627\\u0631\\u06AF\\u0631\\u062F\\u0627\\u0646: \", props.movie.director]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"dt\", {\n          dir: \"rtl\",\n          children: [\" \\u0646\\u0648\\u06CC\\u0633\\u0646\\u062F\\u0647: \", props.movie.writers.join(\", \")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"dt\", {\n          dir: \"rtl\",\n          children: [\" \\u0645\\u062F\\u062A \\u0632\\u0645\\u0627\\u0646: \", props.movie.duration, \" \\u062F\\u0642\\u06CC\\u0642\\u0647\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"dt\", {\n        dir: \"rtl\",\n        children: [\" \\u062A\\u0627\\u0631\\u06CC\\u062E \\u0627\\u0646\\u062A\\u0634\\u0627\\u0631: \", props.movie.releaseDate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"hor-line\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: props.movie.summary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n}\n\n_c6 = MovieInfo;\n\nfunction AddToWatchList(props) {\n  _s3();\n\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = () => {\n    setLoading(true);\n    updateWatchList(props.movie.id, props.movie.ageLimit).then(res => {\n      setLoading(false);\n      toast.info(res);\n    }).catch(error => {\n      if (error.response) console.log(error.response.data);else console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-image\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: props.movie.image,\n      alt: props.movie.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 24\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-to-watchList\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        id: \"form_action\",\n        name: \"action\",\n        value: \"add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"hidden\",\n        id: \"form_movie_id\",\n        name: \"movie_id\",\n        value: \"1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: handleSubmit,\n        children: \" \\u0627\\u0641\\u0632\\u0648\\u062F\\u0646 \\u0628\\u0647 \\u0644\\u06CC\\u0633\\u062A \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 9\n  }, this);\n}\n\n_s3(AddToWatchList, \"/Rjh5rPqCCqf0XYnTUk9ZNavw3Q=\");\n\n_c7 = AddToWatchList;\nexport default Movie;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"Movie\");\n$RefreshReg$(_c2, \"MovieDetails\");\n$RefreshReg$(_c3, \"Score\");\n$RefreshReg$(_c4, \"Stars\");\n$RefreshReg$(_c5, \"Star\");\n$RefreshReg$(_c6, \"MovieInfo\");\n$RefreshReg$(_c7, \"AddToWatchList\");","map":{"version":3,"sources":["/home/hamid/Desktop/CA8-Front/src/Movie/Movie.js"],"names":["React","useState","useEffect","getMovie","postRate","useParams","updateWatchList","LoadingSpinner","toast","ActorsBox","CommentsBox","Movie","props","movieId","movie","setMovie","comments","setComments","loading","setLoading","then","m","catch","error","response","console","log","data","commentsArr","i","key","MovieDetails","coverImage","name","Score","show","setShow","handleClick","imdbRate","id","rating","ratingCount","Stars","rate","res","stars","push","Star","index","MovieInfo","director","writers","join","duration","releaseDate","summary","AddToWatchList","handleSubmit","ageLimit","info","image"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Movie.css';\nimport {useState, useEffect} from \"react\";\nimport {getMovie, postRate} from \"../Services/Movie\";\nimport { useParams } from 'react-router-dom';\nimport {updateWatchList} from \"../Services/Watchlist\";\nimport LoadingSpinner from \"../common/LoadingSpinner\";\nimport {toast} from \"react-toastify\";\nimport ActorsBox from \"./ActorsBox\";\nimport CommentsBox from \"./CommentsBox\";\n\nfunction Movie(props) {\n    const { movieId } = useParams();\n    const [movie, setMovie] = useState(null);\n    const [comments, setComments] = useState({});\n    const [loading, setLoading] = useState(true);\n    useEffect( () => {\n        setLoading(true);\n        getMovie(movieId)\n            .then(m => {\n                setMovie(m);\n                setComments(m.comments);\n                setLoading(false);\n            })\n            .catch(error => {\n                if (error.response)\n                    console.log(error.response.data);\n                else\n                    console.log(error);\n            });\n        },[]);\n    if (loading)\n        return <div className=\"movie-spinner\"> <LoadingSpinner /> </div>\n\n    const commentsArr = []\n    let i=0;\n    for (let key in comments) {\n        commentsArr[i] = comments[key];\n        i++;\n    }\n\n    return (\n        <div className=\"main\">\n            <MovieDetails movie={movie} setMovie={setMovie}/>\n            <ActorsBox movieId={movieId}/>\n            <CommentsBox comments={commentsArr} setComments={setComments}/>\n        </div>\n    );\n\n}\n\nfunction MovieDetails(props) {\n    return (\n        <div className={\"movie-page-container\"}>\n            <div className=\"back-image\"><img src={props.movie.coverImage} alt={props.movie.name}/></div>\n            <div className=\"movie-detail\">\n                <Score movie={props.movie} setMovie={props.setMovie}/>\n                <MovieInfo movie={props.movie}/>\n                <AddToWatchList movie={props.movie}/>\n            </div>\n        </div>\n    );\n}\n\n\n\nfunction Score(props) {\n    const [show, setShow] = useState(true);\n    const [loading, setLoading] = useState(false);\n    const handleClick = () => {\n        setShow(false);\n    }\n    return (\n        <div className=\"col-score\">\n            <dl className=\"desc\">\n                <dt className=\"desc-text\"><h1>{props.movie.imdbRate}</h1></dt>\n                {show? (\n                    <div onClick={handleClick}>\n                        <span className=\"iconify custom-icon-star\" data-icon=\"emojione:star\" o></span>\n                    </div>) : (\n                    <Stars setShow={setShow} setMovie={props.setMovie} movieId={props.movie.id} setLoading={setLoading}/>\n                )}\n                {loading? (<LoadingSpinner />) : (\n                    <div className=\"desc-text-top\">\n                        <dt className=\"desc-text\"> امتیاز کاربران {props.movie.rating}</dt>\n                        <dt className=\"desc-text\"> ({props.movie.ratingCount} رای)</dt>\n                    </div>\n                    )}\n            </dl>\n        </div>\n    );\n}\n\nfunction Stars(props) {\n    const handleClick= (rate) => {\n        props.setShow(true);\n        props.setLoading(true);\n        postRate(props.movieId, 10 - rate)\n            .then(res => {\n                props.setMovie(res);\n                props.setLoading(false);\n            })\n            .catch(error => {\n                if (error.response)\n                    console.log(error.response.data);\n                else\n                    console.log(error);\n            })\n\n    }\n    let stars = [];\n    for(let i=0; i<10; i++)\n        stars.push(Star(i, handleClick))\n\n    return (\n        <div className=\"rating\">\n            {stars}\n        </div>\n    );\n}\n\nfunction Star(index, handleClick) {\n    return (\n        <div className=\"rating\">\n            <input type=\"radio\" name=\"rating\" value={index} id={index} onClick={() => handleClick(index)}/>\n            <label htmlFor={index}>☆</label>\n        </div>\n    );\n}\n\nfunction MovieInfo(props) {\n    return (\n        <div className=\"col-desc\">\n            <dl className=\"desc\">\n                <dt dir=\"rtl\">{props.movie.name}</dt>\n                <div className=\"sub-desc\">\n                    <dt dir=\"rtl\"> کارگردان: {props.movie.director}</dt>\n                    <dt dir=\"rtl\"> نویسنده: {props.movie.writers.join(\", \")}</dt>\n                    <dt dir=\"rtl\"> مدت زمان: {props.movie.duration} دقیقه</dt>\n                </div>\n                <dt dir=\"rtl\"> تاریخ انتشار: {props.movie.releaseDate}</dt>\n                <hr className=\"hor-line\"/>\n                <p>{props.movie.summary}</p>\n            </dl>\n        </div>\n    );\n}\n\nfunction AddToWatchList(props) {\n    const [loading, setLoading] = useState(false);\n    const handleSubmit = () => {\n        setLoading(true);\n        updateWatchList(props.movie.id, props.movie.ageLimit)\n            .then(res => {\n                setLoading(false);\n                toast.info(res);\n            })\n            .catch(error => {\n                if (error.response)\n                    console.log(error.response.data);\n                else\n                    console.log(error);\n            })\n    }\n    return (\n        <div className=\"col-image\">\n            <img src={props.movie.image} alt={props.movie.name} />\n            {loading? (<LoadingSpinner />) : (\n                <div className=\"add-to-watchList\">\n                    <input type=\"hidden\" id=\"form_action\" name=\"action\" value=\"add\"/>\n                    <input type=\"hidden\" id=\"form_movie_id\" name=\"movie_id\" value=\"1\"/>\n                    <button type=\"submit\" onClick={handleSubmit}> افزودن به لیست </button>\n                </div>\n            )\n            }\n        </div>\n    );\n}\n\nexport default Movie;"]},"metadata":{},"sourceType":"module"}